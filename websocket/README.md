the simulated websocket

### Dev notes

Using Vitest 2.\* because in 3 custom conditions dont' see to be respected right now.

see https://github.com/vitest-dev/vitest/issues/5301
